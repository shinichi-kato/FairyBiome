---
title: BiomeBotの仕様
date: "2015-05-05"
description: "BiomeBot"
---


## 概要

このチャットボットはユーザからのセリフを受け取り、返答を返します。

bot.reply(userName,text)

## パートの動作

### responder

辞書を使ってユーザに返答を返す

### learner

・ユーザの入力にどう答えたらいいかを質問し、帰ってきた答えとペアにして辞書に追加します。
・ユーザから高評価を受けたとき、ユーザ入力とチャットボット出力をペアにして辞書に追加します。



## チャットボットの特殊動作

### チャットボットへの入力文字列でトリガーする動作

bot.reply(user,text)関数のtextに下記のコマンド文字列を与えることで特定の動作をします。

|コマンド文字列|動作|
|---|---|
|{!NAME_ME}|ユーザに名前名前をつけてくれるよう促すメッセージを返します|
|{!LEAVE}|ユーザに離れることを伝えるメッセージを返し、自身のデータはクラウドに保存してlocalのデータを消去します|
{!DIE}|ユーザにお別れのメッセージを返し、localデータを消去します|

### チャットボットの出力文字列に埋め込まれるリクエスト

チャットボットはチャットシステムに動作をリクエストする際、以下の文字列を返答文字列の中に埋め込みます。

|リクエスト|要求する動作|
|---|---|
|{?REQUEST_DIE}|チャットボットのローカルデータを削除する|
|{?REQUEST_LEAVE}|チャットボットのデータをクラウドに保存し、ローカルデータは削除する|




### チャットボット内部で利用されるコマンド

チャットボットの出力文字列に以下のコマンドが含まれる場合、コマンド文字列はそれを評価した結果の文字列に置き換わります。

|コマンド|動作|
|{hp}|現在の体力値|
|{botName}|チャットボットの名前|
|{userName}|返答を返す相手ユーザの名前|
|{firstUserName}|最初に名前をくれたユーザの名前|
|{timezone}|現在の時間帯"night","noon","morning"|
|{season}|現在の季節 summer,spring,autumn,winter|

出力文字列中に以下の文字列が含まれていた場合、チャットボットはその文字列を出力文字列から除去し、指定された動作を行います。

|コマンド|動作|
|---|---|
|{hp+}|体力値が1増加|
|{hp+[1-9]}|体力値が指定した数増加|
|{hp-}|体力値が1減少|
|{hp-[1-9]}|体力値が指定した数減少|
|{PROMISE_GET_NAME}|次のユーザの回答をチャットボットの名前とみなす|
|{PROMISE_YN}|次のユーザの回答をはい/いいえとみなす